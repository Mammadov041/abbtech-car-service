databaseChangeLog:
  - logicalFilePath: tbl-brand/20260123-2-create-trigger-brand.yaml
  - changeSet:
      id: 20260123-2-create-trigger-function-brand
      author: said
      changes:
        - sql:
            sql: |
              CREATE OR REPLACE FUNCTION brand_update_trigger_fn()
              RETURNS TRIGGER
              LANGUAGE plpgsql
              AS $$
              BEGIN
                  NEW.trigger_column := 'UPDATED_AT_' || to_char(current_timestamp, 'YYYY-MM-DD HH24:MI:SS');
                  RETURN NEW;
              END;
              $$;
        - rollback:
            sql: DROP FUNCTION IF EXISTS brand_update_trigger_fn();

  - changeSet:
      id: 20260123-3-create-trigger-brand
      author: said
      changes:
        - sql:
            sql: |
              DROP TRIGGER IF EXISTS brand_before_update_trigger ON brand;
              
              CREATE TRIGGER brand_before_update_trigger
              BEFORE UPDATE ON brand
              FOR EACH ROW
              EXECUTE PROCEDURE brand_update_trigger_fn();
        - rollback:
            sql: DROP TRIGGER IF EXISTS brand_before_update_trigger ON brand;